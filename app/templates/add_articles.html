<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Page</title>
    <link rel="stylesheet" href="../static/css/add.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body>
    <nav class="NavBar">
        <div class="logo-search">Lexium</div>
        <div class="links">
            <a href="/" id="addArticle" class="icon">
                <i class="fas fa-plus"></i>
            </a>
            <a href="http://127.0.0.1:5000/" id="addhomeLink" class="icon">
                <i class="fas fa-home"></i>
            </a>
        </div>
    </nav>
   
    <div class="container">
        <div class="tab_box">
            <button class="tab_btn active">Add Content</button>
            <button class="tab_btn">Add Link</button>
            <div class="line"></div>
        </div>
        <div class="content_box">
            <form method="POST" action="/" class="content active" name="addContentForm">
                <div class="input-container">
                    <label class="textAdd" for="input1">Title</label>
                    <textarea id="input1" name="title" placeholder="Enter title..." rows="4" cols="50"></textarea>
                </div>
                <div class="input-container">
                    <label class="textAdd" for="input2">Body</label>
                    <textarea id="input2" name="body" placeholder="Enter body..." rows="10" cols="50"></textarea>
                </div>
                <div class="input-container" id="url-container">
                    <label class="textAdd" for="inputLink">URL</label>
                    <textarea id="inputLink" name="url" placeholder="Enter URL..." rows="4" cols="50"></textarea>
                </div>
                <div class="btncontainer">
                    <button type="submit" name="addContent" value="Submit" class="btn" id="btn">
                        <p id="btnText">Submit</p>
                        <div class="check-box">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50">
                                <path fill="transparent" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                            </svg>
                        </div>
                    </button>
                </div>
            </form>
            
            <form method="POST" action="/" class="content" name="addLinkForm">
                <div class="input-container">
                    <label class="textAdd" for="inputLink">URL</label>
                    <textarea id="inputLink" name="urlonly" placeholder="Enter URL..." rows="4" cols="50"></textarea>
                </div>
                <div class="btncontainer">
                    <button type="submit" name="addLink" value="Submit Link" class="btn" id="btnLink">
                        <p id="btnLinkText">Submit Link</p>
                        <div class="check-box">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50">
                                <path fill="transparent" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                            </svg>
                        </div>
                    </button>
                </div>
            </form>
            
        </div>
    </div>
    

    <script>
    const tabs = document.querySelectorAll('.tab_btn');  
    const all_content = document.querySelectorAll('.content');
    const line = document.querySelector('.line');  

    document.addEventListener("DOMContentLoaded", () => {
    const activeTab = document.querySelector('.tab_btn.active');
    if (activeTab) {
        line.style.width = activeTab.offsetWidth + "px";
        line.style.left = activeTab.offsetLeft + "px";
    }
    });

tabs.forEach((tab, index) => {
    tab.addEventListener('click', (e) => {
        tabs.forEach(tab => tab.classList.remove('active'));
        tab.classList.add('active');

        line.style.width = e.target.offsetWidth + "px";
        line.style.left = e.target.offsetLeft + "px";
        
        all_content.forEach(content => content.classList.remove('active'));
        all_content[index].classList.add('active');
    });
});

const handleSubmit = (btn, btnText, checkBox, text, form) => {
    btn.addEventListener('click', function (event) {
        event.preventDefault(); // Prevent the form from submitting immediately
        btnText.innerText = "Done"; // Change text to "Done"
        btn.classList.add("active");
        checkBox.classList.add("active");

        // Timeout to wait for animation before submitting
        setTimeout(() => {
            btnText.innerText = text; // Restore the original text
            btn.classList.remove("active");
            checkBox.classList.remove("active");

            form.submit();
        }, 3000); 
    });
};

// Get references to the buttons and forms
const addContentForm = document.querySelector('form[name="addContentForm"]');
const addLinkForm = document.querySelector('form[name="addLinkForm"]');

// Apply the handleSubmit function for both buttons
handleSubmit(document.getElementById('btn'), document.getElementById('btnText'), document.querySelector('.check-box'), "Submit", addContentForm);
handleSubmit(document.getElementById('btnLink'), document.getElementById('btnLinkText'), document.querySelector('.check-box'), "Submit Link", addLinkForm);


    </script>
</body>
</html>
